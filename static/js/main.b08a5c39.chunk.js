(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var o=n(1),r=n(0),c=n.n(r),a=n(3),s=n.n(a),i=n(4),u=n(5);var l=function(e){var t=e.onSubmit,n=Object(r.useState)(""),c=Object(i.a)(n,2),a=c[0],s=c[1];return Object(o.jsx)("header",{className:"Searchbar",children:Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==a?(t(a),s("")):u.b.error("Please enter search query!",{position:"top-right",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},className:"SearchForm",children:[Object(o.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(o.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(o.jsx)("input",{value:a,onChange:function(e){s(e.target.value)},className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})},b=n(9),d=n(11),j=n.n(d);var h=function(e){var t=e.closeModal,n=e.children,c=document.querySelector("#modal-root");Object(r.useEffect)((function(){return document.addEventListener("keydown",s),function(){document.removeEventListener("keydown",s)}}),[]);var s=function(e){"Escape"===e.code&&t()};return Object(a.createPortal)(Object(o.jsx)("div",{className:"Overlay",onClick:function(e){e.target===e.currentTarget&&t()},children:Object(o.jsx)("div",{className:"Modal",children:n})}),c)};var O=function(e){var t=e.loadMore;return Object(o.jsx)("button",{type:"button",onClick:t,className:"Button",children:"Load More"})};var g=function(e){var t=e.item,n=e.openModal;return Object(o.jsx)("li",{className:"ImageGalleryItem",children:Object(o.jsx)("img",{id:t.id,onClick:function(){return n(t.id)},className:"ImageGalleryItem-image",src:t.webformatURL,alt:t.tags})})};n(38),n(10),n(39);var m=function(e){var t=e.query,n=Object(r.useState)([]),c=Object(i.a)(n,2),a=c[0],s=c[1],l=Object(r.useState)(!1),d=Object(i.a)(l,2),m=d[0],f=d[1],p=Object(r.useState)(1),v=Object(i.a)(p,2),x=v[0],S=v[1],y=Object(r.useState)(!1),C=Object(i.a)(y,2),w=C[0],N=C[1],k=Object(r.useState)(null),F=Object(i.a)(k,2),E=F[0],M=F[1];Object(r.useEffect)((function(){1!==x&&B(x)}),[x]),Object(r.useEffect)((function(){s([]),S(1),B(1)}),[t]),Object(r.useEffect)((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}),[a]);var B=function(e){f(!0),function(e,t){return fetch("https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=".concat(e,"&page=").concat(t,"&per_page=",12,"&key=17903714-8f5ebcdc0900c0123ad2db8f4")).then((function(e){return e.json()}))}(t,e).then((function(e){e.hits.length>0?(u.b.success("Success!",{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),s((function(t){if(""!==t)return[].concat(Object(b.a)(t),Object(b.a)(e.hits))})),f(!1)):u.b.warn("Nothing found, try another query",{position:"top-right",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})).catch((function(e){u.b.error("Error, Something went wrong, try again",{position:"top-right",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),console.log(e)}))},I=function(e){N(!0),M(a.find((function(t){return t.id===e})))};return Object(o.jsxs)(o.Fragment,{children:[a.length>0&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("ul",{className:"ImageGallery",children:a.map((function(e){return Object(o.jsx)(g,{item:e,openModal:I},e.id)}))}),Object(o.jsx)("div",{className:"loadMoreContainer",children:m?Object(o.jsx)(j.a,{type:"TailSpin",color:"#00BFFF",height:40,width:40,timeout:4e3}):Object(o.jsx)(O,{loadMore:function(){S((function(e){return e+1}))}})})]}),w&&Object(o.jsx)(h,{closeModal:function(){N(!1),M(null)},children:Object(o.jsx)("img",{src:E.largeImageURL,alt:E.tags})})]})};var f=function(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(l,{onSubmit:c}),n&&Object(o.jsx)(m,{query:n})]})};n(40);s.a.render(Object(o.jsxs)(c.a.StrictMode,{children:[Object(o.jsx)(f,{className:"App"}),Object(o.jsx)(u.a,{position:"bottom-center",autoClose:4e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.b08a5c39.chunk.js.map